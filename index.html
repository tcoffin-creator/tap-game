<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Runner Rush</title>
  <style>
    body { background: #222; margin: 0; }
    #gameBox { background: #eee; width: 375px; height: 620px; margin: 24px auto; border-radius: 10px; position: relative; overflow: hidden; box-shadow: 0 6px 24px #3334; }
    #player { position: absolute; bottom: 40px; left: 140px; width: 56px; height: 56px; background: #09c; border-radius: 30%; box-shadow: 0 4px 8px #09c4; display: flex; align-items: center; justify-content: center; font-size: 2.4em; color: #fff; transition: left 0.12s cubic-bezier(0.55,0.08,0.68,0.53); }
    .obstacle { position: absolute; top: -64px; width: 48px; height: 48px; background: #f43; border-radius: 32% 48% 51% 38%; }
    #score, #hiScore { text-align: center; font-size: 2em; margin: 12px 0; color: #fff; }
    #startBtn { display: block; margin: 20px auto 0; padding: 14px 40px; font-size: 1em; border: none; border-radius: 7px; background: #444; color: #fff; cursor: pointer; }
    #gameOver { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #222c; color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 2em; z-index: 6; }
    #muteBtn { position: absolute; bottom: 14px; left: 12px; background: #333; color: #fff; border-radius: 44%; padding: 8px; border: none; cursor: pointer; font-size: 1.2em;}
  </style>
</head>
<body>
  <div id="score">Score: 0</div>
  <div id="hiScore">High Score: 0</div>
  <button id="startBtn">Start Game</button>
  <div id="gameBox"></div>
  <audio id="scoreSound" src="https://assets.mixkit.co/sfx/download/mixkit-game-bonus-reached-2184.wav"></audio>
  <audio id="hitSound" src="https://assets.mixkit.co/sfx/download/mixkit-player-losing-or-failing-2042.wav"></audio>
  <script>
    const gameBox = document.getElementById('gameBox');
    const scoreDiv = document.getElementById('score');
    const hiScoreDiv = document.getElementById('hiScore');
    const scoreSound = document.getElementById('scoreSound');
    const hitSound = document.getElementById('hitSound');
    const startBtn = document.getElementById('startBtn');
    let player, obstacles = [], score = 0, hiScore = 0, running = false, lane = 1, gameTimer, obstacleTimer, mute = false, gameOverScreen;

    function loadHighScore() {
      hiScore = Number(localStorage.getItem('runner_hi')) || 0;
      hiScoreDiv.textContent = 'High Score: ' + hiScore;
    }

    function makePlayer() {
      player = document.createElement('div');
      player.id = 'player';
      player.textContent = 'ðŸš¶';
      setLane(1);
      gameBox.appendChild(player);
    }
    function setLane(to) {
      lane = Math.max(0, Math.min(2, to));
      player.style.left = (lane * 100 + 37) + 'px';
    }

    function newObstacle() {
      const obs = document.createElement('div');
      obs.className = 'obstacle';
      obs.dataset.lane = Math.floor(Math.random()*3);
      obs.style.left = (obs.dataset.lane*100 + 43) + 'px';
      obs.style.top = '-50px';
      gameBox.appendChild(obs);
      obstacles.push(obs);
    }

    function moveObstacles() {
      obstacles.forEach((obs, i) => {
        let y = parseInt(obs.style.top) + 6;
        obs.style.top = y + 'px';
        if (y > 570) {
          obs.remove();
          obstacles.splice(i, 1);
          score++;
          scoreDiv.textContent = 'Score: ' + score;
          if (!mute) scoreSound.play();
          if (score > hiScore) {
            hiScore = score;
            localStorage.setItem('runner_hi', hiScore);
            hiScoreDiv.textContent = 'High Score: ' + hiScore;
          }
        }
        // Collision
        if (y > 470 && Math.abs(lane - obs.dataset.lane) < 0.7 && y < 550) {
          // Game Over
          if (!mute) hitSound.play();
          stopGame();
        }
      });
    }

    function stopGame() {
      running = false;
      clearInterval(gameTimer);
      clearInterval(obstacleTimer);
      showGameOver();
    }

    function showGameOver() {
      gameOverScreen = document.createElement('div');
      gameOverScreen.id = 'gameOver';
      gameOverScreen.innerHTML = `
        <div>Game Over</div>
        <div>Score: ${score}</div>
        <button onclick="restartGame()">Restart</button>
        <button id="muteBtn">${mute ? 'Unmute ðŸ”Š' : 'Mute ðŸ”‡' }</button>
      `;
      gameBox.appendChild(gameOverScreen);
      document.getElementById('muteBtn').onclick = toggleMute;
    }

    function startGame() {
      gameBox.innerHTML = '';
      obstacles = [];
      score = 0;
      scoreDiv.textContent = 'Score: 0';
      running = true;
      makePlayer();
      gameTimer = setInterval(() => {
        moveObstacles();
      }, 24);
      obstacleTimer = setInterval(() => {
        newObstacle();
      }, 600);
    }

    function restartGame() {
      gameOverScreen.remove();
      startGame();
    }

    function toggleMute() {
      mute = !mute;
      document.getElementById('muteBtn').textContent = mute ? 'Unmute ðŸ”Š' : 'Mute ðŸ”‡';
    }

    startBtn.onclick = () => {
      startBtn.style.display = 'none';
      startGame();
    };
    window.addEventListener('keydown', e => {
      if (!running) return;
      if (e.key === 'ArrowLeft') setLane(lane - 1);
      if (e.key === 'ArrowRight') setLane(lane + 1);
    });
    gameBox.addEventListener('touchstart', e => {
      if (!running) return;
      const x = e.touches[0].clientX - gameBox.getBoundingClientRect().left;
      if (x < 150) setLane(lane - 1);
      else if (x > 220) setLane(lane + 1);
    });
    loadHighScore();
  </script>
</body>
</html>
